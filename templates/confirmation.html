{% extends "base.html" %}

{% block title %}The Hancox Wedding Sweepstake{% endblock %}

{% block navbar %}{% endblock %}
{% block footer %}{% endblock %}

{% block content %}
<div class="confirmation-container page-content d-flex align-items-center justify-content-center" style="min-height: 80vh;">
    <div style="max-width: 600px; width: 100%; text-align: center; padding: 20px; margin: 0 auto;">
        <h1 class="display-4 mb-4">Thank You!</h1>
        <p class="lead mb-4" style="color: #4dd4c7;">{{ first_name }}, your answers have been submitted!</p>

        {% if qr_code_path %}
        <div class="card mb-4 mx-auto" style="border: none; background: white; padding: 25px; border-radius: 15px; max-width: 350px;">
            <p class="mb-3" style="color: #1a1a1a; font-size: 16px; font-weight: 600;">Keep a reminder of your answers</p>
            <div style="display: flex; justify-content: center;">
                <img src="/static/{{ qr_code_path }}" alt="QR Code" style="max-width: 250px; width: 100%; border: 3px solid #ddd; border-radius: 10px;"
                     onerror="this.parentElement.innerHTML='<p class=\'text-muted\'>QR code will be available shortly</p>';">
            </div>
        </div>
        {% endif %}

        <p class="text-muted mb-4">You'll be redirected to the home screen in <span id="countdown">10</span> seconds...</p>

        <div style="display: flex; justify-content: center;">
            <button type="button" class="btn btn-primary btn-lg" onclick="goHome()" style="padding: 20px 40px; font-size: 18px;">
                Return to Home Now
            </button>
        </div>
    </div>
</div>

<script>
let countdown = 10;
const countdownElement = document.getElementById('countdown');

const timer = setInterval(function() {
    countdown--;
    countdownElement.textContent = countdown;

    if (countdown <= 0) {
        clearInterval(timer);
        goHome();
    }
}, 1000);

function goHome() {
    document.querySelector('.page-content').classList.add('fade-out');
    setTimeout(() => {
        window.location.href = '/';
    }, 300);
}
</script>
{% endblock %}
